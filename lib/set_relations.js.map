{"version":3,"sources":["../src/set_relations.js"],"names":["setRelations","options","model","modelJson","requestId","topLevelJson","constructor","relations","forEach","embeddedJson","relation","jsonKey","foreignKeys","foreignKey","Object","assign","undefined","ids"],"mappings":";;;;;kBAEwBA,Y;;AAFxB;;;;;;AAEe,SAASA,YAAT,GAAoC;AAAA,MAAdC,OAAc,uEAAJ,EAAI;AAAA,iBAEGA,OAFH;AAAA,MAE3CC,KAF2C,YAE3CA,KAF2C;AAAA,MAEpCC,SAFoC,YAEpCA,SAFoC;AAAA,MAEzBC,SAFyB,YAEzBA,SAFyB;AAAA,MAEdC,YAFc,YAEdA,YAFc;;;AAIjDH,QAAMI,WAAN,CAAkBC,SAAlB,CAA4BC,OAA5B,CAAoC,oBAAY;;AAE9C,QAAIC,eAAeN,UAAUO,SAASC,OAAnB,CAAnB;AACA,QAAIC,cAAcT,UAAUO,SAASG,UAAnB,CAAlB;;AAEAZ,cAAU;AACRC,kBADQ;AAERQ,wBAFQ;AAGRN,0BAHQ;AAIRC;AAJQ,KAAV;;AAOA,QAAII,YAAJ,EAAkB;AAChBK,aAAOC,MAAP,CAAcd,OAAd,EAAuB,EAAEE,WAAWM,YAAb,EAAvB;AACD,KAFD,MAEO,IAAIG,gBAAgBI,SAApB,EAA+B;AACpCF,aAAOC,MAAP,CAAcd,OAAd,EAAuB,EAAEgB,KAAKL,WAAP,EAAvB;AACD;;AAED;AACA,gCAAYX,OAAZ;AAED,GArBD;AAuBD","file":"set_relations.js","sourcesContent":["import setRelation from './set_relation';\n\nexport default function setRelations(options = {}) {\n\n  let { model, modelJson, requestId, topLevelJson } = options;\n  \n  model.constructor.relations.forEach(relation => {\n\n    let embeddedJson = modelJson[relation.jsonKey];\n    let foreignKeys = modelJson[relation.foreignKey];\n\n    options = {\n      model,\n      relation,\n      requestId,\n      topLevelJson\n    }\n\n    if (embeddedJson) {\n      Object.assign(options, { modelJson: embeddedJson });\n    } else if (foreignKeys !== undefined) {\n      Object.assign(options, { ids: foreignKeys });\n    }\n\n    // console.log(relation.propertyName, attributes);\n    setRelation(options);\n\n  });\n\n}"]}