{"version":3,"sources":["../src/init_relations.js"],"names":["initRelations","options","model","constructor","relations","forEach","relation","propertyName","initialValue","setMethodName","Object","assign","bind","removeMethodName","relatedModel"],"mappings":";;;;;kBAMwBA,a;;AANxB;;AAEA;;;;AACA;;;;AACA;;;;;;;;AAEe,SAASA,aAAT,GAAqC;AAAA,MAAdC,OAAc,uEAAJ,EAAI;AAAA,MAC5CC,KAD4C,GAClCD,OADkC,CAC5CC,KAD4C;;AAGlD;;AACA,wCAAqBA,KAArB;;AAEAA,QAAMC,WAAN,CAAkBC,SAAlB,CAA4BC,OAA5B,CAAoC,oBAAY;;AAE9C,gCAAiBH,KAAjB,sBAA2BI,SAASC,YAApC,EAAmDD,SAASE,YAA5D;;AAEA;AACAN,UAAMI,SAASG,aAAf,IAAgC,YAAuB;AAAA,UAAdR,OAAc,uEAAJ,EAAI;;AACrDS,aAAOC,MAAP,CAAcV,OAAd,EAAuB,EAAEK,kBAAF,EAAYJ,YAAZ,EAAvB;AACA,aAAO,iCAAgBD,OAAhB,CAAP;AACD,KAH+B,CAG9BW,IAH8B,CAGzBV,KAHyB,CAAhC;;AAKA;AACAA,UAAMI,SAASO,gBAAf,IAAmC,UAASC,YAAT,EAAuB;AACxD,aAAO,oCAAmB;AACxBZ,oBADwB;AAExBI,0BAFwB;AAGxBQ;AAHwB,OAAnB,CAAP;AAKD,KANkC,CAMjCF,IANiC,CAM5BV,KAN4B,CAAnC;AAQD,GAnBD;AAoBD","file":"init_relations.js","sourcesContent":["import { extendObservable } from 'mobx';\r\n\r\nimport setRelationsDefaults from './set_relations_defaults';\r\nimport removeRelatedModel from './remove_related_model';\r\nimport setRelatedModel from './set_related_model';\r\n\r\nexport default function initRelations(options = {}) {\r\n  let { model } = options;\r\n\r\n  // set defaults for relations\r\n  setRelationsDefaults(model);\r\n  \r\n  model.constructor.relations.forEach(relation => {      \r\n\r\n    extendObservable(model, { [relation.propertyName]: relation.initialValue });\r\n\r\n    // add alias method to set relation to model's instance\r\n    model[relation.setMethodName] = function(options = {}) {\r\n      Object.assign(options, { relation, model });\r\n      return setRelatedModel(options);\r\n    }.bind(model);\r\n\r\n    // add alias method to remove relation to model's instance\r\n    model[relation.removeMethodName] = function(relatedModel) {\r\n      return removeRelatedModel({\r\n        model,\r\n        relation, \r\n        relatedModel\r\n      });\r\n    }.bind(model);\r\n\r\n  });\r\n}"]}