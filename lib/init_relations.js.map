{"version":3,"sources":["../src/init_relations.js"],"names":["initRelations","options","model","constructor","relations","forEach","relation","propertyName","initialValue","setMethodName","Object","assign","bind","removeMethodName","relatedModel"],"mappings":";;;;;kBAMwBA,a;;AANxB;;AAEA;;;;AACA;;;;AACA;;;;;;;;AAEe,SAASA,aAAT,GAAqC;AAAA,MAAdC,OAAc,uEAAJ,EAAI;AAAA,MAC5CC,KAD4C,GAClCD,OADkC,CAC5CC,KAD4C;;AAGlD;;AACA,wCAAqBA,KAArB;;AAEAA,QAAMC,WAAN,CAAkBC,SAAlB,CAA4BC,OAA5B,CAAoC,oBAAY;;AAE9C,gCAAiBH,KAAjB,sBAA2BI,SAASC,YAApC,EAAmDD,SAASE,YAA5D;;AAEA;AACAN,UAAMI,SAASG,aAAf,IAAgC,YAAuB;AAAA,UAAdR,OAAc,uEAAJ,EAAI;;AACrDS,aAAOC,MAAP,CAAcV,OAAd,EAAuB,EAAEK,kBAAF,EAAYJ,YAAZ,EAAvB;AACA,aAAO,iCAAgBD,OAAhB,CAAP;AACD,KAH+B,CAG9BW,IAH8B,CAGzBV,KAHyB,CAAhC;;AAKA;AACAA,UAAMI,SAASO,gBAAf,IAAmC,UAASC,YAAT,EAAuB;AACxD,aAAO,oCAAmB;AACxBZ,oBADwB;AAExBI,0BAFwB;AAGxBQ;AAHwB,OAAnB,CAAP;AAKD,KANkC,CAMjCF,IANiC,CAM5BV,KAN4B,CAAnC;AAQD,GAnBD;AAoBD","file":"init_relations.js","sourcesContent":["import { extendObservable } from 'mobx';\n\nimport setRelationsDefaults from './set_relations_defaults';\nimport removeRelatedModel from './remove_related_model';\nimport setRelatedModel from './set_related_model';\n\nexport default function initRelations(options = {}) {\n  let { model } = options;\n\n  // set defaults for relations\n  setRelationsDefaults(model);\n  \n  model.constructor.relations.forEach(relation => {      \n\n    extendObservable(model, { [relation.propertyName]: relation.initialValue });\n\n    // add alias method to set relation to model's instance\n    model[relation.setMethodName] = function(options = {}) {\n      Object.assign(options, { relation, model });\n      return setRelatedModel(options);\n    }.bind(model);\n\n    // add alias method to remove relation to model's instance\n    model[relation.removeMethodName] = function(relatedModel) {\n      return removeRelatedModel({\n        model,\n        relation, \n        relatedModel\n      });\n    }.bind(model);\n\n  });\n}"]}